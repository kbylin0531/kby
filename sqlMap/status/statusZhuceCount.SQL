select count(CLASSNO) from (SELECT CLASSSTUDENTS.TOTAL AS EXPECTED,
CLASSARRIVED.ARRIVED,
CLASSES.CLASSNO,
CLASSES.CLASSNAME
FROM CLASSES
LEFT OUTER JOIN
( SELECT COUNT(*)AS TOTAL,STUDENTS.CLASSNO
  FROM STUDENTS
  WHERE (STATUS<>'B')AND(STATUS<>'C')AND(STATUS<>'E')AND(STATUS<>'F')AND(STATUS<>'G')
  GROUP BY STUDENTS.CLASSNO
) AS CLASSSTUDENTS ON CLASSES.CLASSNO=CLASSSTUDENTS.CLASSNO
LEFT OUTER JOIN
( SELECT COUNT(*) AS ARRIVED,STUDENTS.CLASSNO
  FROM STUDENTS JOIN REGDATA ON STUDENTS.STUDENTNO=REGDATA.STUDENTNO AND REGDATA.YEAR=:YEAR AND REGDATA.TERM=:TERM
  WHERE REGDATA.REGCODE<>'C' AND REGDATA.REGCODE<>'D'
  GROUP BY STUDENTS.CLASSNO
) AS CLASSARRIVED ON CLASSES.CLASSNO=CLASSARRIVED.CLASSNO
WHERE CLASSES.SCHOOL=:SCHOOL
)as b